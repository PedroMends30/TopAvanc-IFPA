<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comanda</title>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        table input{
            width: 60px;
        }

        .sub-t{
            text-align: center;
        }

        #content{
            border: 1px solid black;
            border-radius: 0.7rem;
            padding: 10px;
            margin-left: auto;
            margin-right: auto;
            max-width: fit-content;
        }

        #content *{
            margin-left: auto;
            margin-right: auto;
        }

        #display-1 {
            text-align: center;
        }
    </style>
    <script>
        
        var cont = 1;
        var subtotais = [];

        function subtractLine() {
            var linha = document.getElementById("l" + cont);
            linha.remove();
            cont--;
        }

        function addLine() {
            cont++;
            tabela = document.getElementById("tabela");

            linha = '<tr id="l'+cont+'"><td id="l'+cont+'-c1">'+cont+'</td><td id="l'+cont+'-c2"><select id="l'+cont+'-c2-1" class="select-1"><option value="pato" class="options">Pato no Tucupi</option><option value="vatapa" class="options">Vatapá</option><option value="manicoba" class="options">Maniçoba</option><option value="acai" class="options">Açaí</option></select></td><td id="l'+cont+'-c3"><input id="l'+cont+'-c3-1" class="qtd" type="number"></td><td id="l'+cont+'-c4"><input id="l'+cont+'-c4-1" type="text" onblur="calcSubTotal('+cont+')"></td><td id="l'+cont+'-c5" class="sub-t"></td></tr>';

            
            tabela.insertAdjacentHTML('beforeend', linha);

        }

        function calcTotal() {
            var total = 0;
            for (var i = 0; i < subtotais.length; i++) {
                total += subtotais[i];
            }
            document.getElementById("total").innerHTML = "Total: R$ " + total;
        }

        function calcSubTotal(linha) {
            var qtd = document.getElementById("l" + linha + "-c3-1").value;
            var preco = document.getElementById("l" + linha + "-c4-1").value;
            var subtotal = parseFloat(qtd) * parseFloat(preco);
            document.getElementById("l" + linha + "-c5").innerHTML = subtotal;

            subtotais[linha-1] = parseFloat(subtotal);
        }

        function limparComanda(){
            var tabela = document.getElementById("tabela");
            var linhas = tabela.getElementsByTagName("tr");
            var linhasLength = linhas.length;
            for(var i = 1; i < linhasLength; i++){
                linhas[1].remove();
            }
            cont = 1;
            subtotais = [];

            var linha = '<tr id="l'+cont+'"><td id="l'+cont+'-c1">'+cont+'</td><td id="l'+cont+'-c2"><select id="l'+cont+'-c2-1" class="select-1"><option value="pato" class="options">Pato no Tucupi</option><option value="vatapa" class="options">Vatapá</option><option value="manicoba" class="options">Maniçoba</option><option value="acai" class="options">Açaí</option></select></td><td id="l'+cont+'-c3"><input id="l'+cont+'-c3-1" class="qtd" type="number"></td><td id="l'+cont+'-c4"><input id="l'+cont+'-c4-1" type="text" onblur="calcSubTotal('+cont+')"></td><td id="l'+cont+'-c5" class="sub-t"></td></tr>';
            
            tabela.insertAdjacentHTML('beforeend', linha);
            document.getElementById("total").innerHTML = "";
        }

    </script>
</head>

<body>
    <div id="content">
        <h2 id="display-1">Comanda do Cliente</h2>
        <table style="margin-bottom: 15px;" id="tabela" border="1px solid black">
            <thead>
                <th>#</th>
                <th>Descrição</th>
                <th>Qtd</th>
                <th>Preço</th>
                <th>Subtotal</th>
            </thead>
            <tr id="l1">
                <td id="l1-c1">1</td>
                <td id="l1-c2">
                    <select id="l1-c2-1" class="select-1">
                        <option value="pato" class="options">Pato no Tucupi</option>
                        <option value="vatapa" class="options">Vatapá</option>
                        <option value="manicoba" class="options">Maniçoba</option>
                        <option value="acai" class="options">Açaí</option>
                    </select>
                </td>
                <td id="l1-c3"><input id="l1-c3-1" class="qtd" type="number"></td>
                <td id="l1-c4"><input id="l1-c4-1" type="text" onblur="calcSubTotal(1)"></td>
                <td id="l1-c5" class="sub-t"></td>
            </tr>
           <!-- <tr id="l2">
                <td id="l2-c1">2</td>
                <td id="l2-c2">
                    <select id="l2-c2-1" class="select-1">
                        <option value="pato" class="options">Pato no Tucupi</option>
                        <option value="vatapa" class="options">Vatapá</option>
                        <option value="manicoba" class="options">Maniçoba</option>
                        <option value="acai" class="options">Açaí</option>
                    </select>
                </td>
                <td id="l2-c3"><input id="l2-c3-1" class="qtd" type="number"></td>
                <td id="l2-c4"><input id="l2-c4-1" type="text" onblur="calcSubTotal(2)"></td>
                <td id="l2-c5" class="sub-t"></td>
            </tr>
            <tr id="l3">
                <td id="l3-c1">3</td>
                <td id="l3-c2">
                    <select id="l3-c2-1" class="select-1">
                        <option value="pato" class="options">Pato no Tucupi</option>
                        <option value="vatapa" class="options">Vatapá</option>
                        <option value="manicoba" class="options">Maniçoba</option>
                        <option value="acai" class="options">Açaí</option>
                    </select>
                </td>
                <td id="l3-c3"><input id="l3-c3-1" class="qtd" type="number"></td>
                <td id="l3-c4"><input id="l3-c4-1" type="text" onblur="calcSubTotal(3)"></td>
                <td id="l3-c5" class="sub-t"></td>
            </tr>
            <tr id="l4">
                <td id="l4-c1">4</td>
                <td id="l4-c2">
                    <select id="l4-c2-1" class="select-1">
                        <option value="pato" class="options">Pato no Tucupi</option>
                        <option value="vatapa" class="options">Vatapá</option>
                        <option value="manicoba" class="options">Maniçoba</option>
                        <option value="acai" class="options">Açaí</option>
                    </select>
                </td>
                <td id="l4-c3"><input id="l4-c3-1" class="qtd" type="number"></td>
                <td id="l4-c4"><input id="l4-c4-1" type="text" onblur="calcSubTotal(4)"></td>
                <td id="l4-c5" class="sub-t"></td>
            </tr>-->
        </table>
        <input type="button" value="+" onclick="addLine()">
        <input type="button" value="-" onclick="subtractLine()">
        <h2 id="total"></h2>
        <hr style="margin-bottom: 15px;">
        <input type="button" value="Calcular Total" onclick="calcTotal(0)">
        <input type="button" value="Limpar Comanda" onclick="limparComanda()">
    </div>
</body>

</html>